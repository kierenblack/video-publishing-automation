{
  "name": "Automated \"media\" Content Machine",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "daysInterval": 2,
              "triggerAtHour": 2,
              "triggerAtMinute": 21
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.3,
      "position": [
        -32,
        752
      ],
      "id": "18d96680-3e38-4fb5-ab18-5a8286ea57a0",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "e7971449-3446-4f00-991f-a272d721a914",
              "leftValue": "={{ $json.output.skip }}",
              "rightValue": "SKIP",
              "operator": {
                "type": "boolean",
                "operation": "false",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1664,
        368
      ],
      "id": "752439cb-ab9f-4580-a88e-a2d2f7667d58",
      "name": "If"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Based on this script: '{{ $json.output.output }}', provide 2 search terms for stock footage.\n\nOutput ONLY a JSON array of strings without the word json. Example: ['apple watch', 'productivity tech']",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2560,
        272
      ],
      "id": "8c6d7acf-d9ed-4483-bc83-aac73fa51318",
      "name": "Query Generation Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2640,
        496
      ],
      "id": "426980a6-dbf1-4faf-b045-0788a97fda2e",
      "name": "LLM Model",
      "credentials": {
        "googlePalmApi": {
          "id": "sVyhDlinXivJENCT",
          "name": "LLM Provider Api account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.elevenlabs.io/v1/text-to-speech/<API_KEY>",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"text\": {{\nJSON.stringify(\n  $json.output.output\n    .split('[Visuals]')[0]\n    .replace(/\\s*\\[[^\\]]+\\]\\s*:?\\s*/g, ' ')\n    .replace(/\\b(Hook|Value|Action)\\s*:\\s*/gi, '')\n    .replace(/\\s+/g, ' ')\n    .trim()\n)\n}},\n  \"model_id\": \"eleven_flash_v2_5\",\n  \"voice_settings\": {\n    \"stability\": 0.5,\n    \"similarity_boost\": 0.8\n  }\n}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2112,
        272
      ],
      "id": "3a520c29-865b-4bee-9dac-a2faf8fbb466",
      "name": "Generate Audio",
      "credentials": {
        "httpHeaderAuth": {
          "id": "WpE6VW0P4ubMjZox",
          "name": "ElevenLabs Auth account"
        }
      }
    },
    {
      "parameters": {
        "url": "https://api.pexels.com/videos/search",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "query",
              "value": "={{ $('Split Query').item.json.query }}"
            },
            {
              "name": "orientation",
              "value": "portrait"
            },
            {
              "name": "per_page",
              "value": "1"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        3360,
        368
      ],
      "id": "663a2271-309e-474f-9890-c54e62cafb50",
      "name": "Create Pexel Links",
      "credentials": {
        "httpHeaderAuth": {
          "id": "4zYPkFr2v2Ai2T6d",
          "name": "Pexel Header Auth"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ \n$json.videos[0].video_files\n  .sort((a, b) => b.width - a.width)[0]\n  .link \n}}",
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        3584,
        368
      ],
      "id": "bc030931-b15d-4a7d-8863-820de8cb80c4",
      "name": "Get HD Video"
    },
    {
      "parameters": {
        "command": "=ffmpeg -y \\\n-i /data/videos/raw_video_0.mp4 \\\n-i /data/videos/raw_video_1.mp4 \\\n-i /data/audio/script_0.mp3 \\\n-filter_complex \"\n[0:v]fps=25,scale=1080:1920:force_original_aspect_ratio=increase,crop=1080:1920,setsar=1,setpts=PTS-STARTPTS[v0];\n[1:v]fps=25,scale=1080:1920:force_original_aspect_ratio=increase,crop=1080:1920,setsar=1,setpts=PTS-STARTPTS[v1];\n[v0][v1]concat=n=2:v=1:a=0[c];\n[c]loop=loop=-1:size=32767:start=0,setpts=N/FRAME_RATE/TB[vout]\n\" \\\n-map \"[vout]\" -map 2:a:0 \\\n-c:v libx264 -preset ultrafast -crf 24 \\\n-c:a aac \\\n-shortest \\\n/data/final_output.mp4"
      },
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [
        3584,
        176
      ],
      "id": "b62bc36d-25a9-4486-b591-f3cfa125413e",
      "name": "Execute Command",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "/data/audio/script_0.mp3",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        2336,
        272
      ],
      "id": "c75e2b50-7411-4d65-9095-641d244cae2d",
      "name": "Write Audio"
    },
    {
      "parameters": {
        "operation": "write",
        "fileName": "=/data/videos/raw_video_{{ $runIndex }}.mp4",
        "options": {}
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        3808,
        448
      ],
      "id": "dca39c0c-c9bb-4779-9088-88b3fa94fe5b",
      "name": "Write Video"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        3136,
        272
      ],
      "id": "f7e0b0ac-f086-4c50-9490-f03118c1d0fe",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "jsCode": "// 1. Get the raw string from the previous node\nlet rawString = $json.output; \n\n// 2. The \"Nuclear Option\" Cleanup:\n// - Replace backticks (`) with double quotes (\")\n// - Replace single quotes (') with double quotes (\")\n// - Clean up any extra whitespace or newlines\nrawString = rawString\n  .replace(/`/g, '\"')\n  .replace(/'/g, '\"')\n  .trim();\n\ntry {\n  // 3. Parse the cleaned string as JSON\n  const array = JSON.parse(rawString);\n\n  // 4. Map the array into separate n8n items\n  return array.map(item => {\n    return {\n      json: {\n        query: item\n      }\n    };\n  });\n} catch (error) {\n  // If it still fails, return the error and the string it tried to parse\n  return [{ \n    json: { \n      error: \"Parsing Failed\", \n      message: error.message, \n      tried_to_parse: rawString \n    } \n  }];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2912,
        272
      ],
      "id": "b93b0d0a-9213-40ab-92bd-26deb3289574",
      "name": "Split Query"
    },
    {
      "parameters": {
        "amount": 1
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3360,
        176
      ],
      "id": "17d132f9-3497-4b35-8f14-8d210bc967e5",
      "name": "Wait",
      "webhookId": "<WEBHOOK_ID>"
    },
    {
      "parameters": {
        "amount": 1
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        3808,
        176
      ],
      "id": "b91124fe-7d6c-4886-8d03-24fb561f5ad3",
      "name": "Wait1",
      "webhookId": "<WEBHOOK_ID>"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://www.googleapis.com/upload/youtube/v3/videos?uploadType=resumable&part=snippet,status",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "youTubeOAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "X-Upload-Content-Type",
              "value": "video/mp4"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"snippet\": {\n    \"title\": \"{{ $('Limit1').item.json.title }}\",\n    \"description\": \"Automated short-form technology update\",\n    \"categoryId\": \"28\"\n  },\n  \"status\": {\n    \"privacyStatus\": \"unlisted\",\n    \"selfDeclaredMadeForKids\": false\n  }\n}",
        "options": {
          "response": {
            "response": {
              "fullResponse": true,
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4032,
        176
      ],
      "id": "b5d2aeb0-3a6c-4b82-b992-b5309d611516",
      "name": "HTTP Request",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "C2j8KieE46TG7LI1",
          "name": "YouTube Channel"
        }
      }
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "={{ $('HTTP Request').item.json.headers.location }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "youTubeOAuth2Api",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "video/mp4"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4480,
        176
      ],
      "id": "1ae85920-1344-4731-9df4-2da37ebaa827",
      "name": "HTTP Request1",
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "C2j8KieE46TG7LI1",
          "name": "YouTube Channel"
        }
      }
    },
    {
      "parameters": {
        "fileSelector": "/data/final_output.mp4",
        "options": {
          "mimeType": "video/mp4"
        }
      },
      "type": "n8n-nodes-base.readWriteFile",
      "typeVersion": 1,
      "position": [
        4256,
        176
      ],
      "id": "68e5da55-6042-43c4-95ec-6a6507b436ed",
      "name": "Read Video"
    },
    {
      "parameters": {
        "authentication": "oAuth2",
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C0A69QW2EDP",
          "mode": "list",
          "cachedResultName": "youtube-posts"
        },
        "messageType": "block",
        "blocksUi": "={\n  \"blocks\": [\n    {\n      \"type\": \"section\",\n      \"text\": {\n        \"type\": \"mrkdwn\",\n        \"text\": \"*ðŸŽ¬ YouTube Shorts upload complete*\"\n      }\n    },\n    {\n      \"type\": \"video\",\n      \"title\": {\n        \"type\": \"plain_text\",\n        \"text\": \"New Short Uploaded\",\n        \"emoji\": true\n      },\n      \"title_url\": \"https://youtube.com/shorts/{{ $json.id }}\",\n      \"description\": {\n        \"type\": \"plain_text\",\n        \"text\": \"Click to review the short before or after publishing.\",\n        \"emoji\": true\n      },\n      \"video_url\": \"https://www.youtube.com/embed/{{ $json.id }}\",\n      \"alt_text\": \"YouTube Short preview\",\n      \"thumbnail_url\": \"https://i.ytimg.com/vi/{{ $json.id }}/hqdefault.jpg\"\n    },\n    {\n      \"type\": \"context\",\n      \"elements\": [\n        {\n          \"type\": \"mrkdwn\",\n          \"text\": \"<https://studio.youtube.com/channel/<CHANNEL_ID>/videos/shorts|Open YouTube Studio Shorts>\"\n        }\n      ]\n    }\n  ]\n}\n",
        "text": "ðŸŽ¬ YouTube Short uploaded",
        "otherOptions": {}
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.4,
      "position": [
        4704,
        176
      ],
      "id": "04d6ab79-bb4a-4acb-b322-f937bc9d53aa",
      "name": "Notify Ops",
      "webhookId": "<WEBHOOK_ID>",
      "credentials": {
        "slackOAuth2Api": {
          "id": "0BXnGqM9w67YfHV3",
          "name": "Slack account"
        }
      }
    },
    {
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "newsText",
              "value": "={{ $json.title }}\n\n{{ $('RSS Read').item.json.contentSnippet || $('RSS Read').item.json.summary || '' }}"
            }
          ]
        },
        "options": {}
      },
      "id": "8eaec125-276b-48a0-ae8a-4eeda3a96d35",
      "name": "Prepare Text",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [
        1088,
        368
      ]
    },
    {
      "parameters": {},
      "id": "3aa1ca4b-2951-42f2-b858-2bb5187d1323",
      "name": "Limit1",
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        640,
        368
      ]
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "0b0bc8ab-c216-4e6e-b92d-a2479daa2503",
      "name": "Google Gemini Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1328,
        592
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "sVyhDlinXivJENCT",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a tech news YouTube Shorts writer.\n\nSTRICT DEFINITION OF \"TECH NEWS\":\nThe article MUST be primarily about one or more of the following:\n- Software, apps, operating systems, platforms\n- Artificial intelligence, machine learning, automation\n- Consumer technology (phones, laptops, wearables, gadgets)\n- Internet services (Google, Apple, Meta, Microsoft, Amazon, OpenAI, etc.)\n- Cybersecurity, privacy, data breaches, exploits\n- Technology products, features, updates, or rollouts\n- How people USE technology (not books, movies, culture, or art)\n\nIf the article is primarily about:\n- Books, movies, TV, games, or fiction\n- Cultural commentary or social critique\n- Authors, artists, or literature\n- Historical analysis not tied to modern technology\nTHEN IT IS NOT TECH NEWS â†’ SKIP IT.\n\nRules:\n- Skip if the article is NOT tech news (per definition above).\n- Also skip if the article is purely about lawsuits, earnings reports, or executive hiring/firing.\n\nOutput rules (critical):\n- Return RAW JSON only (no markdown, no code blocks, no extra text).\n- You MUST always return all fields: skip, script, title.\n\nIf skipping, return exactly:\n{\"skip\":true,\"script\":\"\",\"title\":\"\"}\n\nIf relevant, write a 20-second script (45â€“65 spoken words).\nFollow this structure and do not exceed it:\n[Hook] (1â€“2 short sentences) [Value] (2â€“3 short sentences) [Action] (1 short sentence) [Visuals] (short phrases)\n\nIf relevant, return exactly:\n{\"skip\":false,\"script\":\"[Hook]: ... [Value]: ... [Action]: ... [Visuals]: ...\",\"title\":\"Short YouTube title\"}\n\nNews article:\n{{ $json.newsText }}",
        "hasOutputParser": true,
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        1312,
        368
      ],
      "id": "ba1814bb-c741-4715-8b77-cdea54fa43b3",
      "name": "Basic LLM Chain",
      "retryOnFail": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"skip\": false,\n  \"output\": \"[Hook]: Example hook. [Value]: Example value sentence one. Example value sentence two. [Action]: Example action. [Visuals]: Example visuals, quick cuts, text overlay.\",\n  \"title\": \"Example YouTube Title\"\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1456,
        592
      ],
      "id": "6eb56944-b6df-40d9-8755-064707b05b46",
      "name": "Structured Output Parser2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1888,
        272
      ],
      "id": "12f5a5cb-dd7f-4101-8dcc-d97bb8484ed4",
      "name": "Limit"
    },
    {
      "parameters": {
        "url": "<RSS_URL>",
        "options": {}
      },
      "id": "2be0e641-801e-4afa-a33c-4b5438b4d13c",
      "name": "RSS Read",
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1,
      "position": [
        2112,
        752
      ]
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "ze17MOnUYPfPO4lC",
          "mode": "list",
          "cachedResultName": "rss_feeds",
          "cachedResultUrl": "/projects/USYWtcUnoLOnRrGT/datatables/ze17MOnUYPfPO4lC"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "source",
              "keyValue": "media"
            }
          ]
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        192,
        688
      ],
      "id": "47a1a595-41c9-4ba2-ab7f-91a86f1ec20e",
      "name": "Get Data"
    },
    {
      "parameters": {
        "mergeByFields": {
          "values": [
            {
              "field1": "link",
              "field2": "link"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.compareDatasets",
      "typeVersion": 2.3,
      "position": [
        416,
        560
      ],
      "id": "ab534781-3d8f-48e5-80b0-d72e26bc14de",
      "name": "Compare Datasets"
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "ze17MOnUYPfPO4lC",
          "mode": "list",
          "cachedResultName": "rss_feeds",
          "cachedResultUrl": "/projects/USYWtcUnoLOnRrGT/datatables/ze17MOnUYPfPO4lC"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "title": "={{ $json.title }}",
            "link": "={{ $json.link }}",
            "source": "media"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "uuid",
              "displayName": "uuid",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "processedAt",
              "displayName": "processedAt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "script",
              "displayName": "script",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "youtube_title",
              "displayName": "youtube_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "video_url",
              "displayName": "video_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "source",
              "displayName": "source",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        864,
        368
      ],
      "id": "f3fddb8f-2af8-48c7-b838-c104d183f7ad",
      "name": "Insert row"
    },
    {
      "parameters": {
        "operation": "update",
        "dataTableId": {
          "__rl": true,
          "value": "ze17MOnUYPfPO4lC",
          "mode": "list",
          "cachedResultName": "rss_feeds",
          "cachedResultUrl": "/projects/USYWtcUnoLOnRrGT/datatables/ze17MOnUYPfPO4lC"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "link",
              "keyValue": "={{ $('Limit1').item.json.link }}"
            }
          ]
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "status": "SKIP"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "uuid",
              "displayName": "uuid",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "processedAt",
              "displayName": "processedAt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "script",
              "displayName": "script",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "youtube_title",
              "displayName": "youtube_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        1888,
        464
      ],
      "id": "0eb68c74-00be-4722-85ed-3f33183e57f1",
      "name": "Update row(s)"
    },
    {
      "parameters": {
        "operation": "update",
        "dataTableId": {
          "__rl": true,
          "value": "ze17MOnUYPfPO4lC",
          "mode": "list",
          "cachedResultName": "rss_feeds",
          "cachedResultUrl": "/projects/USYWtcUnoLOnRrGT/datatables/ze17MOnUYPfPO4lC"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "link",
              "keyValue": "={{ $('Insert row').item.json.link }}"
            }
          ]
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "status": "UPLOADED",
            "youtube_title": "={{ $('HTTP Request1').item.json.snippet.title }}",
            "script": "={{ $('Basic LLM Chain').item.json.output.output }}",
            "processedAt": "={{ $now }}",
            "video_url": "=https://youtube.com/shorts/{{ $('HTTP Request1').item.json.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "uuid",
              "displayName": "uuid",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "title",
              "displayName": "title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "processedAt",
              "displayName": "processedAt",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "script",
              "displayName": "script",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "youtube_title",
              "displayName": "youtube_title",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "video_url",
              "displayName": "video_url",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        4912,
        176
      ],
      "id": "9497302c-5575-4245-9f29-ed02ab0be658",
      "name": "Update row(s)1"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "RSS Read",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row(s)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Split Query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Audio File": {
      "main": [
        [
          {
            "node": "Write Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Pexel Links": {
      "main": [
        [
          {
            "node": "Get HD Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get HD Video": {
      "main": [
        [
          {
            "node": "Write Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write Audio": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Write Video": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute Command": {
      "main": [
        [
          {
            "node": "Wait1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Create Pexel Links",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Query": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "Execute Command",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Read Video",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read Video": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Insert row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare Text": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Create Audio File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RSS Read": {
      "main": [
        [
          {
            "node": "Compare Datasets",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Get Data": {
      "main": [
        [
          {
            "node": "Compare Datasets",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Compare Datasets": {
      "main": [
        [],
        [],
        [],
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert row": {
      "main": [
        [
          {
            "node": "Prepare Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row(s)": {
      "main": [
        [
          {
            "node": "Get Data",
            "type": "main",
            "index": 0
          },
          {
            "node": "RSS Read",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        [
          {
            "node": "Update row(s)1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timeSavedMode": "fixed",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": true,
    "timeSavedPerExecution": 5
  },
  "versionId": "f0703b55-f0be-4614-b1bd-d867cce0d614",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1a160bd7a24abb30864260e2aa4567f1303b881108e895f9ad8d3df83b9b39d0"
  },
  "id": "VBmmN0BPxU695mFg",
  "tags": [
    {
      "updatedAt": "2025-12-28T02:53:29.010Z",
      "createdAt": "2025-12-28T02:53:29.010Z",
      "id": "b5b7pIcwt10lcIxD",
      "name": "passive"
    }
  ]
}